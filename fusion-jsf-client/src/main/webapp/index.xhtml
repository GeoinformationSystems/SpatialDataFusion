<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<title>Fusion Client</title>
	<link rel="stylesheet" href="http://openlayers.org/en/v3.1.1/css/ol.css" type="text/css" />
	<h:outputStylesheet library="css" name="styles.css" />
</h:head>
<h:body>

<div id="header" class="content color_main"><div id="header_text">Fusion Client</div>
	<div id="status"><p:ajaxStatus>  
	    <f:facet name="start">  
	        <p:graphicImage value="resources/images/ajax-loader.gif" />  
	    </f:facet>						      
	    <f:facet name="complete">  
	        <h:outputText value="" />  
	    </f:facet>
	</p:ajaxStatus></div>
</div>
	
<div id="mainframe">
	<h:form id="form">
	<p:growl id="message" showDetail="true" />	
	
	<!-- <div class="content section color_sub">Reference Data</div>	         		
   	<h:panelGrid columns="3" styleClass="content alignTop">
      	<h:panelGrid columns="4" styleClass="alignMiddle">
	        
	        <p:selectOneButton id="r_service" value="wfs">
			    <f:selectItem itemLabel="WFS" itemValue="wfs" />
			</p:selectOneButton>
	        <h:outputText for="r_service" value="Base URL: " />
			<h:inputText id="r_base" value="#{referenceWFS.baseURL}" styleClass="inputText"/>
			<p:commandButton title="retrieve capabilities from server" action="#{referenceWFS.initCapabilities}" update="r_typename r_srsname :form:message r_getFeatures" icon="ui-icon-circle-arrow-s" style="width:27px;height:27px;" />
			
			<h:outputText />
	        <h:outputLabel for="r_version" value="Version: " />
			<p:selectOneButton id="r_version" value="#{referenceWFS.version}">
			    <f:selectItems value="#{referenceWFS.supportedVersions}" />
				<p:ajax update="r_getFeatures" />
			</p:selectOneButton>
			<h:outputText />
			
			<h:outputText />
			<h:outputLabel for="r_typename" value="Layer: " />
			<p:selectOneMenu id="r_typename" value="#{referenceWFS.typename}" style="width:300px">
				<f:selectItem itemLabel="select typeName" itemValue="#{referenceWFS.typename}" />
			    <f:selectItems value="#{referenceWFS.supportedTypenames}" />
				<p:ajax update="r_getFeatures r_srsname" />
			</p:selectOneMenu>
			<h:outputText />
			
			<h:outputText />
			<h:outputLabel for="r_srsname" value="SRS Name: " />
			<p:selectOneMenu id="r_srsname" value="#{referenceWFS.SRSName}" style="width:300px" disabled="#{referenceWFS.forceWGS84}">
				<f:selectItem itemLabel="select srsName" itemValue="#{referenceWFS.SRSName}" />
			    <f:selectItems value="#{referenceWFS.supportedSRS}" />
				<p:ajax update="r_getFeatures" />
			</p:selectOneMenu>
			<p:commandButton id="r_getFeatures" disabled="#{referenceWFS.WFSBaseIsInvalid}" title="#{referenceWFS.getFeatureRequest}" onclick="f_initMapResource_r('#{referenceWFS.getFeatureRequest}','#{referenceWFS.SRSName}',#{referenceWFS.centerAsString},#{referenceWFS.extentAsString})" icon="ui-icon-check" style="width:27px;height:27px;" />
			
			<h:outputText />
			<h:outputLabel for="r_forceWGS84" value="force WGS84: " />
			<p:inputSwitch id="r_forceWGS84" value="#{referenceWFS.forceWGS84}">
				<p:ajax update="r_getFeatures r_srsname" />
			</p:inputSwitch>
			<h:outputText />
			
		</h:panelGrid>
		
		<h:panelGroup layout="block">
			<div id="map_r" class="map" />
		</h:panelGroup>
		
		<h:panelGroup layout="block">
			<div id="map_r_info" class="info" />
			<div id="map_r_coord" class="coord" />			
		</h:panelGroup>
		
	</h:panelGrid>
            
	<div class="content section color_sub">Target Data</div>
	<h:panelGrid columns="3" styleClass="content alignTop">
      	<h:panelGrid columns="4" styleClass="alignMiddle">
	        
	        <p:selectOneButton id="t_service" value="wfs">
			    <f:selectItem itemLabel="WFS" itemValue="wfs" />
			</p:selectOneButton>
	        <h:outputText for="t_service" value="Base URL: " />
			<h:inputText id="t_base" value="#{targetWFS.baseURL}" styleClass="inputText"/>
			<p:commandButton title="retrieve capabilities from server" action="#{targetWFS.initCapabilities}" update="t_typename t_srsname :form:message t_getFeatures" icon="ui-icon-circle-arrow-s" style="width:27px;height:27px;" />
			
			<h:outputText />
	        <h:outputLabel for="t_version" value="Version: " />
			<p:selectOneButton id="t_version" value="#{targetWFS.version}">
			    <f:selectItems value="#{targetWFS.supportedVersions}" />
				<p:ajax update="t_getFeatures" />
			</p:selectOneButton>
			<h:outputText />
			
			<h:outputText />
			<h:outputLabel for="t_typename" value="Layer: " />
			<p:selectOneMenu id="t_typename" value="#{targetWFS.typename}" style="width:300px">
				<f:selectItem itemLabel="select typeName" itemValue="#{targetWFS.typename}" />
			    <f:selectItems value="#{targetWFS.supportedTypenames}" />
				<p:ajax update="t_getFeatures t_srsname" />
			</p:selectOneMenu>
			<h:outputText />
			
			<h:outputText />
			<h:outputLabel for="t_srsname" value="SRS Name: " />
			<p:selectOneMenu id="t_srsname" value="#{targetWFS.SRSName}" style="width:300px" disabled="#{targetWFS.forceWGS84}">
				<f:selectItem itemLabel="select srsName" itemValue="#{targetWFS.SRSName}" />
			    <f:selectItems value="#{targetWFS.supportedSRS}" />
				<p:ajax update="t_getFeatures" />
			</p:selectOneMenu>
			<p:commandButton id="t_getFeatures" disabled="#{targetWFS.WFSBaseIsInvalid}" title="#{targetWFS.getFeatureRequest}" onclick="f_initMapResource_t('#{targetWFS.getFeatureRequest}','#{targetWFS.SRSName}',#{targetWFS.centerAsString},#{targetWFS.extentAsString})" icon="ui-icon-check" style="width:27px;height:27px;" />
			
			<h:outputText />
			<h:outputLabel for="t_forceWGS84" value="force WGS84: " />
			<p:inputSwitch id="t_forceWGS84" value="#{targetWFS.forceWGS84}">
				<p:ajax update="t_getFeatures t_srsname" />
			</p:inputSwitch>
			<h:outputText />
			
		</h:panelGrid>
		
		<h:panelGroup layout="block">
			<div id="map_t" class="map" />
		</h:panelGroup>
		
		<h:panelGroup layout="block">			
			<div id="map_t_info" class="info" />
			<div id="map_t_coord" class="coord" />
		</h:panelGroup>
		
	</h:panelGrid>
	
	<div class="content section color_sub">Stats</div>  
	
	<p:outputPanel rendered="true" styleClass="content">
		<div id="stats_rt" />
	</p:outputPanel> -->
	
	<div class="content section color_sub">Dataset Fusion</div>
	
	<h:panelGrid columns="5" styleClass="content alignMiddle">
	
		<p:selectOneButton id="f_service" value="wps">
			 <f:selectItem itemLabel="WPS" itemValue="wps" />
		</p:selectOneButton>
		<h:outputText for="f_service" value="Base URL: " />
		<h:inputText id="f_base" value="#{wpsConnection.baseURL}" styleClass="inputText" style="width:500px;" />
		<p:commandButton title="retrieve capabilities from server" value="get capabilities" action="#{wpsConnection.initCapabilities}" update="f_processes :form:message" icon="ui-icon-circle-arrow-s" />
	</h:panelGrid>
	
	<h:panelGrid columns="2" styleClass="content alignTop" style="padding-top:0px;">
	
		<p:selectManyCheckbox id="f_processes" layout="grid" widgetVar="p_selectedProcesses" value="#{wpsConnection.selectedProcesses}" valueChangeListener="#{wpsConnection.updateProcesses}" columns="1">
			<f:selectItems value="#{wpsConnection.processDescriptions.entrySet()}" var="entry" itemLabel="#{entry.value}" itemValue="#{entry.key}" escape="false" />
			<f:ajax />
        </p:selectManyCheckbox>
        
    </h:panelGrid>
    
	<h:panelGrid columns="2" styleClass="content alignTop" style="padding-top:0px;">
     	<h:panelGroup layout="block">
			<div id="plumb_processes" class="color_border" style="margin-bottom:0px;"/>
		</h:panelGroup>
		<h:panelGroup layout="block">
			<div id="plumb_desc" class="color_txt_main" />
		</h:panelGroup>
		<h:panelGroup>
	     	<h:inputText id="p_literal" styleClass="inputText" style="width:80px;" />
     		<p:commandButton id="p_addLiteral" title="addLiteral" onclick="f_addLiteral();" value="add literal" icon="ui-icon-plus" />
     		<p:commandButton id="p_execute" title="execute" value="execute" action="#{wpsExecute.executeProcess}" icon="ui-icon-arrowreturnthick-1-e" disabled="#{wpsConnection.connectionInvalid}" update=":form:message f_useFusionResult" />
     		<p:remoteCommand name="p_setConnectionsInvalidFromJS" update="p_execute" actionListener="#{wpsConnection.setConnectionsInvalidFromJS}" />
     		<p:commandButton id="p_reset" title="reset" icon="ui-icon-trash" onclick="f_reset();" style="float:right;margin-right:0px;" />
     	</h:panelGroup>
     	<h:inputHidden id="p_connections" value="#{wpsConnection.connections}" />
     	<h:panelGroup layout="block">
			<div id="p_validationResult" class="color_txt_main p_validationResult" />
		</h:panelGroup>
    </h:panelGrid>
        
    <!-- <h:outputText value="Data Harmonization: " />
        <p:selectManyCheckbox id="f_processes_dh" layout="grid" columns="1">
            <f:selectItem itemLabel="CRSReproject ('Reprojects coordinate reference system of input features')" itemValue="false" />
        </p:selectManyCheckbox>
        
        <p:separator /><p:separator />
        
        <h:outputText value="Relation Measurement: " />
        <p:selectManyCheckbox id="f_processes_rm" layout="grid" columns="2">
            <f:selectItem itemLabel="AngleDifference ('Calculates angle difference between linear input geometries')" itemValue="false" />
            <f:selectItem itemLabel="hard criterion" itemValue="false"/>
            <f:selectItem itemLabel="BoundingBoxDistance ('Calculates the distance between input feature bounds')" itemValue="false" />
            <f:selectItem itemLabel="hard criterion" itemValue="false" />
            <f:selectItem itemLabel="GeometryDistance ('Calculates the distance between input feature geometries')" itemValue="false" />
            <f:selectItem itemLabel="hard criterion" itemValue="false" />
            <f:selectItem itemLabel="HausdorffDistance ('Calculates the Hausdorff distance between input feature geometries')" itemValue="false" />
            <f:selectItem itemLabel="hard criterion" itemValue="false" />
            <f:selectItem itemLabel="LengthDifference ('Calculates length difference between input geometries')" itemValue="false" />
            <f:selectItem itemLabel="hard criterion" itemValue="false" />
            <f:selectItem itemLabel="SinuosityDifference ('Calculates sinuosity difference between linear input geometries')" itemValue="false" />
            <f:selectItem itemLabel="hard criterion" itemValue="false" />
            <f:selectItem itemLabel="DamerauLevenshteinDistance ('Calculates Damerau-Levenshtein Distance for feature attributes')" itemValue="false" />
            <f:selectItem itemLabel="hard criterion" itemValue="false" />
            <f:selectItem itemLabel="TopologyRelation ('Determines topology relation between input geometries, stored as DE-9IM')" itemValue="false" />
            <f:selectItem itemLabel="hard criterion" itemValue="false" />
        </p:selectManyCheckbox>
        
        <p:separator /><p:separator />
        
        <h:outputText value="Confidence Measurement: " />
        <p:selectManyCheckbox id="f_processes_cm" layout="grid" columns="2">
            <f:selectItem itemLabel="SimilarityCountMatch ('Counts the number of similarity measurements for a feature relation')" itemValue="false" />
        </p:selectManyCheckbox>
        
        <p:separator /><p:separator />
        
        <h:outputText value="Resolving: " />
        <p:selectManyCheckbox id="f_processes_rs" layout="grid" columns="1">
            <f:selectItem itemLabel="AttributeTransfer ('Transfers all attributes from target to linked reference')" itemValue="false" />
        </p:selectManyCheckbox> -->
        
      
   
        
	<div class="content section color_sub">Compare Datasets</div>
	
	<h:panelGrid columns="2" styleClass="content alignTop" style="margin-bottom:0px;">
		<h:outputLabel for="f_useFusionResult" value="Use fusion results for comparison: " disabled="#{wpsExecute.isNotExecuted}" />
		<p:selectBooleanButton id="f_useFusionResult" onLabel="Yes" offLabel="No" style="width:50px" />	
	</h:panelGrid>
	
	<h:panelGrid columns="4" styleClass="content alignTop" style="padding-top:0px;">
		
		<h:panelGroup layout="block">
			<div id="map_cr" class="map" />
		</h:panelGroup>
		
		<h:panelGroup layout="block">
			<div id="map_ct" class="map" />
		</h:panelGroup>
		
		<h:panelGroup layout="block">
			<div id="map_cr_info" class="info" />
			<div id="map_cr_coord" class="coord" />
		</h:panelGroup>
		
		<h:panelGroup layout="block">
			<div id="map_ct_info" class="info" />
			<div id="map_ct_coord" class="coord" />			
		</h:panelGroup>
		
	</h:panelGrid>   
      
	</h:form>
</div>
    
<!-- <script src="http://openlayers.org/en/v3.2.1/build/ol.js" type="text/javascript"></script> -->
<script src="http://openlayers.org/en/v3.1.1/build/ol.js" type="text/javascript"></script>
<!-- <h:outputScript library="js/extern" name="ol-debug.js" /> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.3.3/proj4.js" type="text/javascript"></script>
<script src="http://epsg.io/31469.js" type="text/javascript"></script>
<h:outputScript library="js" name="ol-resource.js" />
<h:outputScript library="js" name="ol-common.js" />
<h:outputScript library="js" name="ol-stats.js" />
<h:outputScript library="js" name="ol-main.js" />
<h:outputScript library="js" name="common.js" />
<h:outputScript library="js" name="ld-relations.js" />
<h:outputScript library="js/extern" name="dom.jsPlumb-1.7.2.js" />
<h:outputScript library="js" name="plumb-main.js" />
	
</h:body>
</html>